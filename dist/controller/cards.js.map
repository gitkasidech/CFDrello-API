{"version":3,"sources":["../../src/controller/cards.js"],"names":["checkCreateCards","board","key","token","t","get","err","data","len","length","i","findOne","id","cards","createnewCards","callCards","console","log","Cards","create","name","idBoard","idList","idMembers","idLabels","newcards","update","$set"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAEO,IAAMA;AAAA,0EAAmB,kBAAMC,KAAN,EAAYC,GAAZ,EAAgBC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACxBC,yBADwB,GACpB,yBAAWF,GAAX,EAAeC,KAAf,CADoB;;AAE5BC,0BAAEC,GAAF,CAAM,eAAeJ,KAAf,GAAuB,YAA7B;AAAA,mGAA2C,iBAAOK,GAAP,EAAYC,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDACnCD,GADmC;AAAA;AAAA;AAAA;;AAAA,sDACxBA,GADwB;;AAAA;AAEjCE,mDAFiC,GAE3BD,KAAKE,MAFsB;AAG9BC,iDAH8B,GAG1B,CAH0B;;AAAA;AAAA,sDAGvBA,IAAIF,GAHmB;AAAA;AAAA;AAAA;;AAAA;AAAA,uDAIf,aAAMG,OAAN,CAAc,EAACC,IAAIL,KAAKG,CAAL,CAAD,CAAUE,EAAd,EAAd,CAJe;;AAAA;AAI7BC,qDAJ6B;AAAA;AAAA,uDAKXC,6BAAqBD,KAArB,EAA2BN,KAAKG,CAAL,CAA3B,CALW;;AAAA;AAK7BK,yDAL6B;;AAMnC,oDAAIA,SAAJ,EACIC,QAAQC,GAAR,CAAY,oCAAZ,EADJ,KAGID,QAAQC,GAAR,CAAY,uBAAZ;;AAT+B;AAGdP,mDAHc;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAA3C;;AAAA;AAAA;AAAA;AAAA;;AAF4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAnB;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAgBA,IAAMI;AAAA,2EAAiB,kBAAMI,KAAN,EAAYL,KAAZ,EAAkBN,IAAlB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,4BACrBM,KADqB;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAECK,MAAMC,MAAN,CAAa;AAChCP,gCAAIL,KAAKK,EADuB;AAEhCQ,kCAAMb,KAAKa,IAFqB;AAGhCC,qCAASd,KAAKc,OAHkB;AAIhCC,oCAAQf,KAAKe,MAJmB;AAKhCC,uCAAWhB,KAAKgB,SALgB;AAMhCC,sCAAUjB,KAAKiB;AANiB,yBAAb,CAFD;;AAAA;AAEhBC,gCAFgB;AAAA,0DAUfA,QAVe;;AAAA;AAAA,8BAYjBZ,MAAMO,IAAN,IAAcb,KAAKa,IAAnB,IAA2BP,MAAMS,MAAN,IAAgBf,KAAKe,MAAhD,IAA0D,yBAAeT,MAAMU,SAArB,KAAmC,yBAAehB,KAAKgB,SAApB,CAA7F,IAA+H,yBAAeV,MAAMW,QAArB,KAAkC,yBAAejB,KAAKiB,QAApB,CAZhJ;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAaCN,MAAMQ,MAAN,CAAa,EAACd,IAAIL,KAAKK,EAAV,EAAb,EAA2B,EAACe,MAAK;AACpDP,sCAAMb,KAAKa,IADyC;AAEpDE,wCAAQf,KAAKe,MAFuC;AAGpDC,2CAAWhB,KAAKgB,SAHoC;AAIpDC,0CAAUjB,KAAKiB;AAJqC,6BAAN,EAA3B,CAbD;;AAAA;AAahBC,iCAbgB;AAAA,0DAmBfA,SAnBe;;AAAA;AAAA,0DAsBf,KAtBe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB;;AAAA;AAAA;AAAA;AAAA,GAAN","file":"cards.js","sourcesContent":["import Trello from 'node-trello'\r\nimport {Cards} from '../models/cards'\r\n\r\nexport const checkCreateCards = async(board,key,token) => {\r\n    let t = new Trello(key,token)\r\n    t.get(\"/1/boards/\" + board + \"/cards/all\", async (err, data) => {\r\n        if (err) throw err\r\n        const len = data.length\r\n        for (let i = 0; i < len; i++){\r\n            const cards = await Cards.findOne({id:(data[i]).id})\r\n            const callCards = await createnewCards(Cards,cards,data[i])\r\n            if (callCards) \r\n                console.log(\"create or update new card complete\")\r\n            else \r\n                console.log(\"have a card already!!\")\r\n        }  \r\n    })   \r\n}\r\n\r\nexport const createnewCards = async(Cards,cards,data) => {\r\n    if (!cards) {\r\n        const newcards = await Cards.create({\r\n            id: data.id,\r\n            name: data.name,\r\n            idBoard: data.idBoard,\r\n            idList: data.idList,\r\n            idMembers: data.idMembers,\r\n            idLabels: data.idLabels\r\n        })\r\n        return newcards\r\n    }\r\n    else if (cards.name != data.name || cards.idList != data.idList || JSON.stringify(cards.idMembers) != JSON.stringify(data.idMembers) || JSON.stringify(cards.idLabels) != JSON.stringify(data.idLabels)) {\r\n        const newcards = await Cards.update({id: data.id},{$set:{\r\n            name: data.name,\r\n            idList: data.idList,\r\n            idMembers: data.idMembers,\r\n            idLabels: data.idLabels\r\n        }})\r\n        return newcards\r\n    } \r\n    else\r\n        return false\r\n}"]}